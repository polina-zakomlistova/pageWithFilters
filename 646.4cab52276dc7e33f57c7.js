"use strict";(self.webpackChunkpage_with_fillters_and_paginattors=self.webpackChunkpage_with_fillters_and_paginattors||[]).push([[646],{4646:(e,n,t)=>{t.r(n),t.d(n,{default:()=>z});var r=t(5893),a=t(7294),i=t(5998),o=t(6746),s=t(573),u=(0,s.P1)((function(e){return e.serversAndPC}),(function(e){return e})),l=t(1740),c=t(9573),f=t(8732),d=t(6926),h=t(7896),p=t(6011),g=t(3694),v=t(4680),m=t(3863),j=(0,s.P1)([function(e,n,t){return e},function(e,n,t){return n},function(e,n,t){return t}],(function(e,n,t){var r=n*t,a=r+t;return e.slice(r,a)})),x=t(9725),b=t(8155),Z=t(9655),y=(0,s.P1)([function(e,n){return e},function(e,n){return n}],(function(e,n){return function(e){if(0===Object.keys(e).length)return!0;for(var n in e)if(!Array.isArray(e[n])||0!==e[n].length)return!1;return!0}(n)?e:e.filter((function(e){var t=!0,r=function(r){var a=e[r],i=n[r],o=void 0;if(i.length&&("string"==typeof a||"number"==typeof a?o=[a.toString()]:Array.isArray(a)&&(o=a),0===o.filter((function(e){return i.includes(e)})).length))return t=!1,"break"};for(var a in n)if("break"===r(a))break;return t}))})),C=(0,s.P1)([function(e,n){return e},function(e,n){return n}],(function(e,n){var t=n.toLowerCase();return""!=n?e.filter((function(e){return-1!=e.name.toLowerCase().indexOf(t)})):e})),P=t(5116),w=t(6867),N=t(2761),O=t(1216),S=t(4129),E=t(1508),k=t(2574),A=t(3031),F=t(7666),I=t(1275),_=t(6446),R=t(2009),L=t(4292),M=t(2887),T=t(1052),B=function(){return B=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},B.apply(this,arguments)};function G(e){var n=e.filters,t=e.selectedValues,i=e.onFilterChange,o=Object.fromEntries(n.map((function(e){return[e.name,[]]})));for(var s in o)t.hasOwnProperty(s)&&(o[s]=t[s]);var u=(0,a.useState)(o),l=u[0],c=u[1];return(0,a.useEffect)((function(){i(l)}),[l,i]),(0,r.jsx)("div",{className:T.Z.wrapper,children:n.map((function(e){return(0,r.jsxs)(_.Z,{className:T.Z.formControl,children:[(0,r.jsx)(F.Z,{children:e.label}),(0,r.jsx)(L.Z,{multiple:!0,value:l[e.name]||[],onChange:function(n){var t=n.target.value,r="string"==typeof t?t.split(","):t;!function(e,n){var t;c(B(B({},l),((t={})[e]=n,t)))}(e.name,r)},input:(0,r.jsx)(A.Z,{label:"Tag"}),renderValue:function(e){return e.join(", ")},children:e.values.map((function(n){return(0,r.jsxs)(I.Z,{value:n.toString(),children:[(0,r.jsx)(M.Z,{checked:l[e.name].indexOf(n.toString())>-1}),(0,r.jsx)(R.Z,{primary:n})]},n.toString())}))})]},e.name)}))})}function U(e){var n=e.handleSearchChange,t=e.value,i=e.filters,o=e.selectedFilters,s=e.handleFilterChange,u=e.className,l=(0,a.useState)(!1),c=l[0],f=l[1],d=function(){f(!1)};return(0,r.jsxs)("div",{className:u,children:[(0,r.jsx)(P.Z,{value:t,fullWidth:!0,variant:"outlined",placeholder:"Поиск...",onChange:n,InputProps:{startAdornment:(0,r.jsx)(w.Z,{children:(0,r.jsx)(N.Z,{})}),endAdornment:(0,r.jsx)(w.Z,{onClick:function(){f(!0)},children:(0,r.jsx)(O.Z,{})})}}),(0,r.jsx)(S.Z,{open:c,onClose:d,"aria-labelledby":"filter-modal-title","aria-describedby":"filter-modal-description",children:(0,r.jsxs)(E.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},children:[(0,r.jsx)("h2",{id:"filter-modal-title",children:"Фильтры"}),(0,r.jsx)(G,{filters:i,selectedValues:o,onFilterChange:s}),(0,r.jsx)(k.Z,{onClick:d,children:"Закрыть"})]})})]})}var H=function(){return H=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},H.apply(this,arguments)};const V=function(){var e;!function(e){e.PAGE_NUMBER="pageNumber",e.FILTER_NAME="filterName",e.FILTERS="filters"}(e||(e={}));var n=(0,Z.lr)(),t=n[0],s=n[1],P=t.get(e.PAGE_NUMBER),w=t.get(e.FILTER_NAME),N=t.get(e.FILTERS),O=(0,i.v9)(u),S=(0,a.useState)(w||""),E=S[0],k=S[1],A=(0,a.useState)(N?JSON.parse(decodeURIComponent(N)):{}),F=A[0],I=A[1],_=(0,a.useState)(parseInt(P,10)||0),R=_[0],L=_[1],M=(0,a.useState)(5),T=M[0],B=M[1],G={name:"Имя",type:"Тип",location:"Местоположение",organizationUnit:"Подразделение",inventoryNumber:"Инвентарный номер",tags:"Теги",dateCreation:"Дата создания",dateUpdate:"Дата обновления",dateAudit:"Дата аудита"},V=[{label:"Тип ПК",name:"type",values:Object.values(o.n)},{label:"Тэги",name:"tags",values:Object.values(o.L)}],z=function(e,n){L(n)};(0,a.useEffect)((function(){t.set(e.PAGE_NUMBER,R.toString()),t.set(e.FILTER_NAME,E);var n=JSON.stringify(F),r=encodeURIComponent(n);t.set(e.FILTERS,r),s(t)}),[R,F,E]);var J=(0,i.v9)((function(){return C(O,E)})),W=(0,a.useMemo)((function(){return J}),[J,E]),Y=(0,i.v9)((function(){return y(W,F)})),K=(0,a.useMemo)((function(){return Y}),[Y,F]),Q=(0,i.v9)((function(){return j(K,R,T)})),q=(0,a.useMemo)((function(){return Q}),[Q,R,T]);return(0,r.jsxs)("div",{className:l.Z.wrapper,children:[(0,r.jsx)(U,{value:E,handleSearchChange:function(e){k(e.target.value)},handleFilterChange:function(e){I(e)},filters:V,selectedFilters:F,className:l.Z.search}),(0,r.jsxs)(h.Z,{component:v.Z,children:[(0,r.jsxs)(c.Z,{children:[(0,r.jsx)(p.Z,{children:(0,r.jsx)(g.Z,{children:Object.values(G).map((function(e){return(0,r.jsx)(d.Z,{children:e},e)}))})}),(0,r.jsx)(f.Z,{children:q.map((function(e,n){return(0,r.jsx)(g.Z,{children:Object.keys(G).map((function(n){return(0,r.jsx)(d.Z,{children:e[n].toString()},n)}))},n)}))})]}),(0,r.jsx)(m.Z,{component:"div",count:K.length-1,page:R,onPageChange:z,rowsPerPage:T,onRowsPerPageChange:function(e){B(parseInt(e.target.value,10)),L(0)},rowsPerPageOptions:[5,10,25],nextIconButtonProps:{style:{display:"none"}},backIconButtonProps:{style:{display:"none"}}}),(0,r.jsx)(x.Z,{count:Math.ceil((K.length-1)/T),page:R+1,onChange:function(e,n){return z(0,n-1)},showFirstButton:!0,showLastButton:!0,renderItem:function(e){return(0,r.jsx)(b.Z,H({component:"button"},e))}})]})]})},z=function(){return(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"title",children:"Серверы и ПК"}),(0,r.jsx)(V,{})]})}},1740:(e,n,t)=>{t.d(n,{Z:()=>r});const r={wrapper:"G6s80Hk4",search:"TxdTnPBN"};var a=t(4783)(e.id,{locals:!0});e.hot.dispose(a)},1052:(e,n,t)=>{t.d(n,{Z:()=>r});const r={wrapper:"yQPHpGhZ",formControl:"tE4GGHPf",chips:"NHYYKk2F",chip:"zmWbOHOc"};var a=t(4783)(e.id,{locals:!0});e.hot.dispose(a)}}]);